<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Movie List PWA</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="manifest" href="manifest.json">
</head>

<body>
  <header>
    <h1><a href="/">My Movie List</a></h1>
    <label>
        <span>Search for a movie</span>
        <input id="search" type="text" placeholder="movie name">
    </label>
  </header>

  <main>
    <ul class="movies">Search movies to start adding them to your list</ul>
    <div class="error">
      <h2>Offline error</h2>
      <p>You appear to be offline, so we couldn't get movies. We will try automatically later when you come back online and display the results next time you open the app.</p>
      <p class="grant-permission">If you allow permissions, we can even let you know when the results are ready <button class="permission">Allow permissions</button></p>
    </div>
  </main>

  <aside>
    <button class="close">Close</button>
    <div class="movie"></div>
    <div class="error">
      <h2>Offline error</h2>
      <p>You appear to be offline, so we couldn't retrieve the movie details. We will try automatically later when you come back online and display the details next time you open the app.</p>
      <p class="grant-permission">If you allow permissions, we can even let you know when the results are ready <button class="permission">Allow permissions</button></p>
    </div>
  </aside>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js', {
        scope: '/'
      }).then(reg => {
        if (reg.installing) {
          console.log('Service worker installing');
        } else if (reg.waiting) {
          console.log('Service worker installed');
        } else if (reg.active) {
          console.log('Service worker active');
        }
      }).catch(e => {
        console.log('Registration failed with ' + e);
      });
    }
  </script>
  <script src="localforage-1.10.0.min.js"></script>
  <script src="script.js"></script>
</body>

</html>